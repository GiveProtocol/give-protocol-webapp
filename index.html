<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://etqbojasfmpieigeefdj.supabase.co https://*.sentry.io https://translate.google.com https://translate.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com; style-src 'self' 'unsafe-inline' https://translate.googleapis.com; img-src 'self' data: https: blob:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://etqbojasfmpieigeefdj.supabase.co https://*.sentry.io wss://*.supabase.co https://api.giveprotocol.io https://translate.googleapis.com https://www.google-analytics.com https://analytics.google.com; frame-src 'self' https://translate.google.com;"
    />

    <!-- Silktide Consent Manager -->
    <link
      rel="stylesheet"
      id="silktide-consent-manager-css"
      href="/silktide-consent-manager.css"
    />
    <script src="/silktide-consent-manager.js"></script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-CBQHKLHD8T"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }

      // Set default consent to denied
      gtag("consent", "default", {
        analytics_storage: "denied",
        ad_storage: "denied",
        ad_user_data: "denied",
        ad_personalization: "denied",
        wait_for_update: 500,
      });

      gtag("js", new Date());
      gtag("config", "G-CBQHKLHD8T");
    </script>

    <!-- Silktide Configuration -->
    <script>
      // Wait for Silktide to load before configuring
      if (typeof silktideCookieBannerManager !== "undefined") {
        silktideCookieBannerManager.updateCookieBannerConfig({
          background: {
            showBackground: true,
          },
          cookieIcon: {
            position: "bottomLeft",
          },
          cookieTypes: [
            {
              id: "necessary",
              name: "Necessary",
              description:
                "<p>These cookies are necessary for the website to function properly and cannot be switched off. They help with things like logging in and setting your privacy preferences.</p>",
              required: true,
              onAccept: function () {
                console.log("Add logic for the required Necessary here");
              },
            },
            {
              id: "analytics",
              name: "Analytics",
              description:
                "<p>These cookies help us improve the site by tracking which pages are most popular and how visitors move around the site.</p>",
              defaultValue: true,
              onAccept: function () {
                gtag("consent", "update", {
                  analytics_storage: "granted",
                });
                dataLayer.push({
                  event: "consent_accepted_analytics",
                });
              },
              onReject: function () {
                gtag("consent", "update", {
                  analytics_storage: "denied",
                });
              },
            },
            {
              id: "advertising",
              name: "Advertising",
              description:
                "<p>These cookies provide extra features and personalization to improve your experience. They may be set by us or by partners whose services we use.</p>",
              onAccept: function () {
                gtag("consent", "update", {
                  ad_storage: "granted",
                  ad_user_data: "granted",
                  ad_personalization: "granted",
                });
                dataLayer.push({
                  event: "consent_accepted_advertising",
                });
              },
              onReject: function () {
                gtag("consent", "update", {
                  ad_storage: "denied",
                  ad_user_data: "denied",
                  ad_personalization: "denied",
                });
              },
            },
          ],
          text: {
            banner: {
              description:
                '<p>We use cookies to enhance your browsing experience, personalize content, and analyze our traffic. By clicking "Accept All Cookies", you agree to the storing of cookies on your device. For more information, please see our <a href="/privacy" target="_blank">Privacy Policy</a>.</p>',
              acceptAllButtonText: "Accept all",
              acceptAllButtonAccessibleLabel: "Accept all cookies",
              rejectNonEssentialButtonText: "Reject non-essential",
              rejectNonEssentialButtonAccessibleLabel: "Reject non-essential",
              preferencesButtonText: "Preferences",
              preferencesButtonAccessibleLabel: "Toggle preferences",
            },
            preferences: {
              title: "Customize your cookie preferences",
              description:
                "<p>We respect your right to privacy. You can choose not to allow some types of cookies. Your cookie preferences will apply across our website.</p>",
              creditLinkText: "",
              creditLinkAccessibleLabel: "",
            },
          },
          position: {
            banner: "bottomCenter",
          },
        });
      } else {
        console.warn(
          "Silktide consent manager not loaded. Please ensure the JS file is available.",
        );
      }
    </script>

    <title>Give Protocol - Smart Giving Platform</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
